{% extends 'layouts/base.html' %}
{% load static %}
{% block content %}
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    function fetchAndPopulateDropdown(formId, dropdownId) {
        // Fetch stock names using Axios
        axios.get("{% url 'get_stock_names' %}")
        .then(function (response) {
            var stockNames = response.data.stock_names;
            var selectElement = document.getElementById(dropdownId);

            // Clear existing options
            selectElement.innerHTML = '';

            // Populate dropdown with fetched stock names
            stockNames.forEach(function(stockName) {
                var option = document.createElement('option');
                option.value = stockName;
                option.textContent = stockName;
                selectElement.appendChild(option);
            });
        })
        .catch(function (error) {
            console.error('Error fetching stock names:', error);
        });
    }

    // Call the function for each form
    fetchAndPopulateDropdown('stockForm1', 'stock1');
    fetchAndPopulateDropdown('stockForm2', 'stock2');
</script>
<div class="content">
    <div class="row">
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                    <h4>Stock 1</h4>
                </div>
                <div class="card-body">
                    <form id="stockForm1" method="post">
    {% csrf_token %}
    <label for="stock1">Choose a stock for Stock 1:</label>
    <!-- Create the dropdown menu for Stock 1 -->
    <select id="stock1" name="stock1">
        {% for symbol in symbols %}
            <option value="{{ symbol }}">{{ symbol }}</option>
        {% endfor %}
    </select>
    <!-- Remove action attribute from the form -->
    <input type="submit" value="Submit">
</form>

                    <div><h4>Replace with stock graph</h4></div>
                    <canvas id="chartBig1"></canvas>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                    <h4>Stock 2</h4>
                </div>
                <div class="card-body">
                    <form id="stockForm2" method="post">
                        {% csrf_token %}
                        <label for="stock2">Choose a stock for Stock 2:</label>
                        <!-- Create the dropdown menu for Stock 2 -->
                        <select id="stock2" name="stock2">
                            {% for symbol in symbols %}
                            <option value="{{ symbol }}">{{ symbol }}</option>
                            {% endfor %}
                        </select>
                        <!-- Remove action attribute from the form -->
                        <input type="submit" value="Submit">
                    </form>

                    <div><h4>Replace with stock graph</h4></div>
                    <canvas id="chartBig2"></canvas>
                </div>
            </div>
        </div>
           <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                </div>
                <div class="card-body">
                    <div><h4>Graph here</h4></div>
                </div>
                <p>Description of graph</p>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                </div>
                <div class="card-body">
                    <div><h4>Graph here</h4></div>
                </div>
                 <p>Description of graph</p>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                </div>
                <div class="card-body">
                    <div><h4>Graph here</h4></div>
                </div>
                 <p>Description of graph</p>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                </div>
                <div class="card-body">
                    <div><h4>Graph here</h4></div>
                </div>
                 <p>Description of graph</p>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                </div>
                <div class="card-body">
                    <div><h4>Graph here</h4></div>
                </div>
                 <p>Description of graph</p>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-chart">
                <div class="card-header ">
                </div>
                <div class="card-body">
                    <div><h4>Graph here</h4></div>
                </div>
                 <p>Description of graph</p>
            </div>

        </div>
    </div>

</div>
{% endblock content %}
